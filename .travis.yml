dist: xenial
sudo: required
language: python
python: 3.7
install:
- pip install -r requirements.txt
services:
- docker
addons:
  apt:
    packages:
    - docker-ce
before_install:
- bash ./setup/fix/no_public_key_fix.sh
- bash ./setup/install/docker_install.sh
before_script:
- docker build ./todo-app/src/todo-view -f ./todo-app/src/todo-view/Dockerfile.dev
  -t todo-view-test
- docker build ./todo-app/src/todo-cache-service -f ./todo-app/src/common/Dockerfile.nodejs.dev
  -t todo-cache-service-test
script:
- docker run todo-view-test npm test -- --browsers=ChromeHeadlessNoSandbox --watch=false
  --no-progress
- docker run todo-cache-service-test npm test
after_success:
- python3.7 main.py DC BUILD
- echo "$DOCKER_HUB_PASSWORD" | docker login -u "$DOCKER_HUB_ID" --password-stdin
- python3.7 main.py DC PUSH
git:
  submodules: false
env:
  global:
    secure: c6VrmieWzuRilo6GiUelbO/dI88okOrM8vNWmMwRf8U8gqx4UEtll3KDZdMuhTY/RZ9CSp3h20dECNmqQihwPObMzHu/dbvldTwzZIlXnkVLL4j1fnbR1rTAk9NPpf9gJD/qfGLf2cndeOvxeNwOCQQbI8AcezEbVTwwUsSbNeKRysYZEn2j14pr+JRRt/hrha6x/aM9SOwLVa0hWaomt7RlZ6fDn+hB3vcT+SCc8A8Xgg/fXpHTzfa2sBNLT3lWRYoTBZkfT+4nDADEoaCnMTHyOUSz9p3Jr6RKfO3XrOpJTtwBqQ7Z+bz97KuH0pSaCXHh7YyUcBZyhsPspc75bmnXDAs6TziLD1DQGfXB9Bpd7zbYKQ/RN7vHO0AulAcy37owLzrkM6fS9wcbGup5JLCUJYizrYVpRIOpDbEGdJFonl2S3g06OmXKaNb0hVuh37hf+hnRscgMv1c5rA+IlUloFC/KFwf97b1750vDjaJBzbiEb5hW8Cy7d3CoHim27JboqUxhf4849ZMCZRqota/t7Cis2y8fY/jht2L8SjnJ7vIQ4LVEtj2zqXDrBqG/eIFOaXxUDp4EcbFSXt8yRIrOuF88DoHyvrKKm0MWxKH8KeeW7OE4ume035C8fYOuf4mtTd3Ufsxs3K4x/d/yaYBFRye3od7did2SgAi9Efg=
